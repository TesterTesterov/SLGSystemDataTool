# SLGSystemDataTool
## English
Dual languaged (eng+rus) tool for extracting, repacking, converting and reconverting resources of SLG System Engine, such as archives (szs, SFP (SPD+SPL)), images (tig, tic, TIM, alb) and audio (VOI). It has some information about video (mdm, mda) too (the tool is not needed for it's editing). SLG System is an engine, used in some visual novels and jRPG's, such is legendary series Sengoku Hime and Sangoku Hime.

It has the following features:
- Help module.
- Extraction the archives in a specific directories.
- Repacking archives from a specific directories files.
- Convertion engine image and audio file to standart one.
- Reconvertion standart image and audio file to engine one.
- Convertation engine images in directory.
- Reconvertation standart images in directory.

To work with SLG System scripts use [SLGSystemScriptTool](https://github.com/TesterTesterov/SLGSystemScriptTool).

### Tested with
- [Shihen 69 \~Shin'en no Messiah\~](https://vndb.org/v1117)
- [Sengoku Hime \~Senran no Yo ni Honoo Tatsu\~](https://vndb.org/v1120)
- [Sengoku Hime 2 \~Senran no Yo, Gun'yuu Arashi no Gotoku\~](https://vndb.org/v3071)
- [Sengoku Hime 3 \~Tenka o Kirisaku Hikari to Kage\~](https://vndb.org/v6763)
- [Sengoku Hime 4 \~Souha Hyakkei, Hana Mamoru Chikai\~](https://vndb.org/v11237)
- [Sengoku Hime 5 \~Senka Tatsu Haou no Keifu\~](https://vndb.org/v13636)

## Русский
Двуязычное (англ + рус) средство для распаковки, перепаковки, конвертации и реконвертации ресурсов движка SLG System, таких как архивов (szs, SFP (SPD+SPL), картинок (tig, tic, TIM, alb) и аудиофайлов (VOI). В справке средства также приведены некоторые данные по видеоформатам движка (mdm, mda), для редактирования которых сие средство не требуется. SLG System есть движок, используемый в ряде визуальных новелл и японских ролевых игр (jRPG), в частности в легендарных сериях Принцессы Сэнгоку, Принцессы Троецарствия.

Имеет следующие возможности:
- Справочный модуль.
- Извлечение архивов в выбранные директории.
- Создание архивов из файлов в выбранной директории.
- Конвертация картинки и аудиофайла движка в стандартную.
- Реконвертация стандартной картинки и аудиофайла в таковую у движка.
- Конвертация картинок и аудиофайлов движка в директории.
- Реконвертация стандартных картинок и аудиофайлов в директории.

Для редактирования скриптов движка SLG System используйте [SLGSystemScriptTool](https://github.com/TesterTesterov/SLGSystemScriptTool).

### Протестировано с
- [Псалтырь 69: Мессия пустоты](https://vndb.org/v1117)
- [Принцессы Сэнгоку: Огни мира войны](https://vndb.org/v1120)
- [Принцессы Сэнгоку 2: В мире войны буря бушует меж феодалами](https://vndb.org/v3071)
- [Принцессы Сэнгоку 3: Свет и тьма рассекают мир](https://vndb.org/v6763)
- [Принцессы Сэнгоку 4: Все средства для победы, клятва защитить цветы](https://vndb.org/v11237)
- [Принцессы Сэнгоку 5: Родословная правителя, потушившего пламя войны](https://vndb.org/v13636)

# Usage / Использование
## English
1. Choose the file format, file of which thou want to convert/reconvert/extract/repack.
2. Choose the version (if needed).
3. Choose the mood (if needed), directories or files.
4. Choose the files or/and directories.
5. Select the command and push it's button.

## Русский
1. Выберите формат файлов, что вы конвертировать/реконвертировать/извлечь/запаковать жаждете.
2. Выберите версию (коли надобно).
3. Выберите режим (коли надобно, пофайловый али попапковый.
4. Выберите файлы и/иль директории (папки).
5. Выберите команду и нажмите на соответствующую кнопку.

# Some information about SLG System engine / Некоторая информация про движок SLG System
## English
SLG System Engine is not very popular, but also not very obsqure engine, used in Gesen 18 (may be not only whose) games. It's in fact some sort of modified Tenka Touitsu ADVANCE engine. There are a lot of good visual novels and jRPG's writted on it, such as Sengoku Hime and Sankoku Hime series.

Oldest versions of it, such as Shihen 69's version, uses no specific archives. For images it has exotic alb format, for audiodata — VOI format.
In some versions older, such as in Sengoku Hime 1, alb no londer used for images. Instead there are tig, TIM and probably tic formats.
Later version, such as Sengoku Hime 3's, uses also szs and SFP (SPD+SPL) archives.
And the latest versions uses also a mdm and mda video files. Games on these versions, such as Sengoku Hime 4, has new file structure.

## Русский
SLG System является не слишком популярным, но и не слишком неизвестный движок, используемый в играх Gesen 18 (а, может, и не только). На самом деле является своего рода модификацией движка Тэнка то:ицу ADVANCE. На нём написано немало сдобный визуальных новелл и японских ролевых игр (jRPG), например серии Принцессы Сэнгоку и Принцессы Троецарствия.

Старейшие его версии не используют каких-либо особенных архивных форматов. Для картинок в них используется своеобразный формат alb, а для звуков — VOI.
Движок несколькими версиями спустя, например в Принцессах Сэнгоку 1, уже не использует alb. Вместо них применяются tig, TIM и, вероятно, tic.
Более поздние версии, как, например, в Принцессах Сэнгоку 3, используют также архивы szs и SFP (SPD+SPL).
И последние же версии используют видеофайлы mdm и mda. У игр на сих версиях, например Принцессах Сэнгоку 4, структура файлов уже иная.

# Some information about formats / Некоторая информация о форматах
## English
### szs
Standart SLG System's archive, it often contains scripts, images and such data.
Contains non-compressed, but slightly obfusificated (xor 0x90) data.
### SFP (SPD+SPL)
Special bicomponental SLG System's music archive, it contains only (or mostly) audio data. Still theoretically it can contain other types of data.
SPD component contains data, while SPL — it's list.
Contains raw data.
### tig
Obfusificated png. Most common image type in games based on SLG System (with exception of earliest versions).
New byte = old byte + key, there each next key = (last key * a + b) >> 16.
### tic
Obfusificated jpg (same type as tig). Very rare. I don't remember myself there you can find one.
### TIM
Special image of SLG System. Has some technical data, may be encrypted with different keys per image.
Encrypted closely as tig or tic, but the image data itself's keys are rotated in range 0x1000.
### alb
Very exotic and awfully *compressed* png image, commonly used in games on the oldest SLG System's versions.
It's so *heavily encrypted* that alb size doubles source png size! **Never** repeat the mistakes of the format developers, seriously!
I won't even explain about this awful *compression*. Look in this mess yourself if you want.
This tool creates better alb (which games on the engine understands), which size is about source png's.
### VOI
Commonly used SLG System's audio format. Just some technical data and raw ogg.
### mdm & mda
Videoformat, used in games on latest SLG System. Probably just a simple mpeg, so you don't need any specific tools to convert it.
Encoded by TMPGEnc, as stated in files.

## Русский
### szs
Стандартный архив ресурсов движка SLG System. Часто содержит скрипты, картинки и прочее подобное.
Содержит несжатые, но немного обфусицированные (xor 0x90) данные.
### SFP (SPD+SPL)
Специальный двухкомпонентный архив движка SLG System. Содержит только (или почти только) аудиоданные, однако в теории может содержать и другие типы данных.
Компонент SDP содержит сами данные, в то время как SPL — их список.
Данные не обфусифицированы.
### tig
Обфусифицированная png. Наиболее частый формат картинок игр на движке SLG System (кроме старейших версий).
Новый байт = старый байт + ключ, где каждый следующий кюч = (прошлый ключ * a + b) >> 16.
### tic
Обфусифицированная (так же, как и tig) jpg. Крайне редко встречается. Даже сам не помню, где можно найти представителя.
### TIM
Особая картинка движка SLG System. Вмещает некоторые технические данные, каждая картинка может быть зашифрована своим ключём.
Шифрование похоже на таковое у tig и tic, но у самих данных изображения ключи повторяются в диапазоне 0x1000.
### alb
Вельми экзотичный формат, ужасно *сжатая* картинка png, что повсеместно используется в играх на старейших разновидностях SLG System.
Настолько *могуче сжата*, что размер alb вдвое больше, чем у исходной png! **Никогда** не повторяйте ошибок горе-разработчиков формата, серьёзно!
Даже не буду объяснять про сей ужасный алгоритм *сжатия*. Посмотрите на сей бардак сами, коль желаете.
Сие средство создаёт лучшие alb (кои игры на движке понимают) размером примерно с исходные png.
### VOI
Повсеместно используемый аудиоформат движка SLG System. Просто некоторые технические данные в сочетании с простым ogg.
### mdm & mda
Видеоформат, используемый в играх на последних версиях SLG System. Судя по всему, простой mpeg, так что для его конвертации не потребуется никаких специальных средств.
Закодирован, как указано в файлах, с помощью TMPGEnc.
